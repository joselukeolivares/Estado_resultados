<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,height=device-height,initial-scale=1">
  <title>Analitica:ERC</title>
  <link rel="icon" href="assets/ui/Bloque_2/CTE CON MANOS ARRIBA/cabeza_negra.png">
  <link rel="stylesheet" href="CSS/escenario.css">
  <link rel="stylesheet" href="CSS/Scratcher.css">
  <link rel="stylesheet" href="CSS/tools.css">
  <link rel="stylesheet" href="CSS/balloon.css">
  <link rel="stylesheet" href="CSS/slider.css">
  <link rel="stylesheet" href="styles/Roboto.css">
  <link rel="stylesheet" href="CSS/style.css">
  <link rel="stylesheet" href="CSS/segmentacion.css">
  <link rel="stylesheet" href="CSS/simulador.css">
  <link rel="stylesheet" href="CSS/loading-bar.css">
  <link rel="stylesheet" href="CSS/indicators.css">
  <link rel="stylesheet" href="mdl/icon.css">
  <link rel="stylesheet" href="mdl/material.blue_grey-indigo.min.css" />




  <!--librerias-->
  <script defer src="mdl/material.min.js"></script>
  <script src="js/mobile-detect.min.js"></script>
  <script src="js/pixi.min.js"></script>
  <script src="js/pixi-layers.js"></script>
  <script src="js/pixi.spine.js"></script>
  <script src="js/GSAP Class/Tweening Basics/js/gsap/plugins/PixiPlugin.js"></script>
  <script src="js/GSAP Class/Tweening Basics/js/gsap/TimelineMax.js"></script>
  <script src="js/GSAP Class/Tweening Basics/js/gsap/TweenMax.js"></script>
  <script src="js/jquery.js"></script>
  <script src="js/tink.js"></script>
  <script src="js/loading-bar.js"></script>
  <script src="js/d3v4/d3v4.js"></script>
</head>


<body>
<script src="Script/start.js"></script>
<script src="Script/shopping.js"></script>
<script src="Script/story.js"></script>
<script src="Script/indicators.js"></script>

<script src="Script/simulador.js"></script>
<script src="Script/Simulador_global.js"></script>
<script src="Script/conclusiones.js"></script>

<div id="mdl_menu" style="position:absolute;display:none;z-index:5;">
<!-- Left aligned menu below button -->
    <button id="demo-menu-lower-left"
            class="mdl-button mdl-js-button mdl-button--icon">
      <i class="material-icons">more_vert</i>
    </button>

    <ul class="mdl-menu mdl-menu--bottom-left mdl-js-menu mdl-js-ripple-effect"
        for="demo-menu-lower-left">
      <li class="mdl-menu__item" onclick='toSlide("start")'>Inicio!</li>
      <li class="mdl-menu__item" onclick='toSlide("story")'>Historia!</li>
      <li class="mdl-menu__item" onclick='toSlide("indicators")'>Indicadores del ERC!</li>
      <li class="mdl-menu__item" onclick='toSlide("segmentacion")'>Perfil de Clientes</li>
      <li class="mdl-menu__item" onclick='toSlide("simulador")'>Simulación!</li>
      <li class="mdl-menu__item" onclick='toSlide("simulador_global")'>Escenario!</li>
      <li class="mdl-menu__item" onclick='toSlide("conclusiones")'>Créditos!</li>
    </ul>
</div>

<main id="main" align="center" style="position: absolute;left:8%">
<!--<img src="assets/ui/Archivo_001.png" alt="animatedimg">-->

</main>
<footer>
  <div id="container" style="height:10%;"align="center" >
    <div id="CoppelLogo" style="background-image: url('assets/ui/logo_coppel.png');
                height: 100%;

                background-repeat: no-repeat;

                position: fixed;"></div>
    <div id="circle1" class="circulos" data-balloon="Inicio!" data-balloon-pos="up"></div>
    <div id="circle2" class="circulos" data-balloon="Historia!" data-balloon-pos="up"></div>
    <div id="circle3" class="circulos" data-balloon="Indicadores del ERC!" data-balloon-pos="up"></div>
    <div id="circle4" class="circulos" data-balloon="Perfil de Clientes" data-balloon-pos="up"></div>
    <div id="circle5" class="circulos" data-balloon="Simulación! " data-balloon-pos="up"></div>
    <div id="circle6" class="circulos" data-balloon="Escenario! " data-balloon-pos="up"></div>
    <div id="circle7" class="circulos" data-balloon="Créditos!" data-balloon-pos="up"></div>
    <div id="COPYRIGTH_"></div>
  </div>

</footer>
<script>
  let clickDisabled = false;
  let timeout = 2000;
  let circle1 = document.getElementById("circle1");
  let circle2 = document.getElementById("circle2");
  let circle3 = document.getElementById("circle3");
  let circle4 = document.getElementById("circle4");
  let circle5 = document.getElementById("circle5");
  let circle6 = document.getElementById("circle6");
  let circle7 = document.getElementById("circle7");

  circle1.addEventListener("click", function () {
    if(clickDisabled) return;

    toSlide("start");
    this.style.backgroundColor = "white";
    circle2.style.backgroundColor = "gray";
    circle3.style.backgroundColor = "gray";
    circle4.style.backgroundColor = "gray";
    circle5.style.backgroundColor = "gray";
    circle6.style.backgroundColor = "gray";
    circle7.style.backgroundColor = "gray";

    clickDisabled = true;
    setTimeout(function(){clickDisabled = false;}, timeout);
  });

  circle2.addEventListener("click", function () {
    if(clickDisabled) return;

    toSlide("story");
    this.style.backgroundColor = "white";
    circle1.style.backgroundColor = "gray";
    circle3.style.backgroundColor = "gray";
    circle4.style.backgroundColor = "gray";
    circle5.style.backgroundColor = "gray";
    circle6.style.backgroundColor = "gray";
    circle7.style.backgroundColor = "gray";

    clickDisabled = true;
    setTimeout(function(){clickDisabled = false;}, timeout);
  });

  circle3.addEventListener("click", function () {
    if(clickDisabled) return;

    toSlide("indicators");
    this.style.backgroundColor = "white";
    circle1.style.backgroundColor = "gray";
    circle2.style.backgroundColor = "gray";
    circle4.style.backgroundColor = "gray";
    circle5.style.backgroundColor = "gray";
    circle6.style.backgroundColor = "gray";
    circle7.style.backgroundColor = "gray";

    clickDisabled = true;
    setTimeout(function(){clickDisabled = false;}, timeout);
  });

  circle4.addEventListener("click", function () {
    if(clickDisabled) return;

    toSlide("segmentacion");
    this.style.backgroundColor = "white";
    circle1.style.backgroundColor = "gray";
    circle2.style.backgroundColor = "gray";
    circle3.style.backgroundColor = "gray";
    circle5.style.backgroundColor = "gray";
    circle6.style.backgroundColor = "gray";
    circle7.style.backgroundColor = "gray";

    clickDisabled = true;
    setTimeout(function(){clickDisabled = false;}, timeout);
  });

  circle5.addEventListener("click", function () {
    if(clickDisabled) return;

    toSlide("simulador");
    this.style.backgroundColor = "white";
    circle1.style.backgroundColor = "gray";
    circle2.style.backgroundColor = "gray";
    circle3.style.backgroundColor = "gray";
    circle4.style.backgroundColor = "gray";
    circle6.style.backgroundColor = "gray";
    circle7.style.backgroundColor = "gray";

    clickDisabled = true;
    setTimeout(function(){clickDisabled = false;}, timeout);
  });

  circle6.addEventListener("click", function () {
    if(clickDisabled) return;

    toSlide("simulador_global");
    this.style.backgroundColor = "white";
    circle1.style.backgroundColor = "gray";
    circle2.style.backgroundColor = "gray";
    circle3.style.backgroundColor = "gray";
    circle4.style.backgroundColor = "gray";
    circle5.style.backgroundColor = "gray";
    circle7.style.backgroundColor = "gray";

    clickDisabled = true;
    setTimeout(function(){clickDisabled = false;}, timeout);
  });

  circle7.addEventListener("click", function () {
    if(clickDisabled) return;

    toSlide("conclusiones");
    this.style.backgroundColor = "white";
    circle1.style.backgroundColor = "gray";
    circle2.style.backgroundColor = "gray";
    circle3.style.backgroundColor = "gray";
    circle4.style.backgroundColor = "gray";
    circle5.style.backgroundColor = "gray";
    circle6.style.backgroundColor = "gray";

    clickDisabled = true;
    setTimeout(function(){clickDisabled = false;}, timeout);
  });

  var md = new MobileDetect(window.navigator.userAgent);


  // more typically we would instantiate with 'window.navigator.userAgent'
  // as user-agent; this string literal is only for better understanding
  console.log("**********");
  console.log( md.mobile() );          // 'Sony'
  console.log( md.phone() );           // 'Sony'
  console.log( md.tablet() );          // null
  console.log( md.userAgent() );       // 'Safari'
  console.log( md.os() );              // 'AndroidOS'
  console.log( md.is('iPhone') );      // false
  console.log( md.is('bot') );         // false
  console.log( md.version('Webkit') );         // 534.3
  console.log( md.versionStr('Build') );       // '4.1.A.0.562'
  console.log( md.match('playstation|xbox') ); // false
  console.log("**********");

    var width=0,height=0,
        dom={},
        div=document.createElement('div'),
        dataCSV=null,
        dataMax,dataMaxMMA;
        main=document.getElementById('main');
        main.style.height="90%";
        //main.style.backgroundColor="red";
        console.log(screen.width,screen.height);
        console.log(main.clientHeight);
        var container=document.getElementById('container');
                if(screen.width>1560){
                  width=1500;

                  var heightAux=(1-(parseFloat(container.style.height)/100)*2)
                      //heightAux=heightAux*2;
                      heightAux=heightAux*parseFloat(screen.height);
                  height=(1-(parseFloat(container.style.height)/100)*2)*parseFloat(screen.height);
                }else if(screen.width>1200&&screen.width<1560){
                  width=1080;
                  height=(1-(parseFloat(container.style.height)/100))*parseFloat(screen.height);;
                }else{
                  width=screen.width;
                  height=(1-(parseFloat(container.style.height)/100))*parseFloat(screen.height);
                }
                //880--1080
                 height=main.clientHeight;

             if(md.os()=="iOS"||md.os()=="AndroidOS"){
         document.getElementsByTagName("footer")[0].style.display="none";
         document.getElementById("mdl_menu").style.display="block";
         main.style.height="99%";
         height=main.clientHeight;
       }

      let  actual_app;

      console.log(width,height);


      d3.csv("data/Estado de Resultados Mx_sep18.csv",funcion);

      function funcion(data){
      try{
        var mes_actual=d3.max(data,function(d){return d.Fecha});
              var datos_obj=[];
              for(var i=0;i<data.length;i++){
                  var year;

                if(data[i].Fecha==mes_actual){

                     datos_obj[0]=data[i];
                     year=new Date(datos_obj[0].Fecha).getFullYear();
                     if(year-1==new Date(data[i-12].Fecha).getFullYear())
                     datos_obj[1]=data[i-12];
                  }


              }

              console.log(datos_obj[0]);
              console.log(datos_obj[1]);
              dataCSV=data;


            }catch(e){
          console.log(e);
        }
        $(document).ready(function() {
          console.log("ready");
          let clickDisabled = false;
          loader_pixi();
        });


      }




  div.setAttribute("id","aplicacion");
  div.setAttribute("style","width:"+width+"px;height:"+height+"px;");
  main.style.width=width+"px";
  main.style.left=(((1-(width/document.body.clientWidth))/2)*100)+"%";
  
  main.appendChild(div);


</script>
<script src="Script/loader_pixi.js"></script>
<script src="Script/menu_puntos.js"></script>
<script src="Script/Scratcher.js"></script>
<script src="Script/slider.js"></script>
<script src="Script/sliderB5B6.js"></script>
<script src="Script/segmentacion.js"></script>
<script src="Script/simulador.js"></script>
</body>
</html>
